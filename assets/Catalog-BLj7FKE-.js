import{r,u as Q,a as q,j as e,F as M,L as w}from"./index-CCKExpl6.js";import{F as I}from"./ShoppingBagIcon-CI4TWRUZ.js";function T({title:n,titleId:l,...i},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":l},i),n?r.createElement("title",{id:l},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))}const V=r.forwardRef(T);function W({title:n,titleId:l,...i},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":l},i),n?r.createElement("title",{id:l},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const B=r.forwardRef(W),Y=()=>{const[n,l]=r.useState([]),[i,o]=r.useState([]),[d,k]=r.useState(!0),[u,N]=r.useState(!1),[C,p]=r.useState(1),[b,g]=r.useState(!0),[L,P]=r.useState(!0),[S,A]=r.useState(""),m=r.useRef(null),{addToCart:E,searchQuery:c,categoryFilter:x,setSearchQuery:v,setCategoryFilter:$}=Q(),F=q(S,300),h=r.useCallback(async(t=1)=>{try{t===1?k(!0):N(!0);const a=8,s=(t-1)*a,R=await(await fetch("https://fakestoreapi.com/products")).json();if(L){const y=Array.from(new Set(R.map(O=>O.category)));o(y),P(!1)}const j=R.slice(s,s+a);j.length<a&&g(!1),l(y=>t===1?j:[...y,...j])}catch(a){console.error("Error fetching products:",a)}finally{k(!1),N(!1)}},[L]);r.useEffect(()=>{p(1),g(!0),l([]),h(1)},[x,h]),r.useEffect(()=>{A(c)},[c]),r.useEffect(()=>{v(F)},[F,v]),r.useEffect(()=>{p(1),g(!0)},[c]);const f=n.filter(t=>{const a=t.title.toLowerCase().includes(c.toLowerCase())||t.description&&t.description.toLowerCase().includes(c.toLowerCase()),s=!x||t.category===x;return a&&s}),D=r.useCallback(t=>{d||u||(m.current&&m.current.disconnect(),m.current=new IntersectionObserver(a=>{a[0].isIntersecting&&b&&!u&&!d&&(p(s=>s+1),h(C+1))},{threshold:.5}),t&&m.current.observe(t))},[d,u,b,h,C]);return d?e.jsx("div",{className:"flex h-96 items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600 dark:border-primary-400"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"font-display text-3xl font-bold text-neutral-900 dark:text-neutral-950 mb-2",children:"Our Products"}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-300 max-w-3xl",children:"Discover our curated collection of high-quality products. We've selected the best items for you."})]}),e.jsxs("div",{className:"mb-8 flex flex-col gap-4 rounded-xl bg-white p-6 shadow-soft lg:flex-row lg:items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(M,{className:"h-5 w-5 text-neutral-400 dark:text-neutral-300"})}),e.jsx("input",{type:"text",placeholder:"Search by product name or description...",className:"input w-full py-3 pl-10 dark:bg-neutral-700 dark:text-white dark:border-neutral-600 dark:placeholder-neutral-400",value:S,onChange:t=>A(t.target.value),"aria-label":"Search by product name or description"})]}),e.jsxs("div",{className:"relative min-w-[200px]",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx(B,{className:"h-5 w-5 text-neutral-400 dark:text-neutral-300"})}),e.jsxs("select",{className:"select w-full appearance-none py-3 pl-10 dark:bg-neutral-700 dark:text-white dark:border-neutral-600",value:x,onChange:t=>$(t.target.value),children:[e.jsx("option",{value:"",children:"All Categories"}),i.map(t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))]})]})]}),f.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("div",{className:"mb-6 rounded-full bg-neutral-100 dark:bg-neutral-800 p-6",children:e.jsx(M,{className:"h-12 w-12 text-neutral-400 dark:text-neutral-300"})}),e.jsx("h2",{className:"mb-2 font-display text-2xl font-semibold text-neutral-900 dark:text-white",children:"No products found"}),e.jsx("p",{className:"mb-4 text-neutral-600 dark:text-neutral-300",children:"Try adjusting your search or filter to find what you're looking for."}),e.jsx("button",{onClick:()=>{v(""),$("")},className:"btn-primary",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:f.map((t,a)=>e.jsxs("div",{ref:a===f.length-1?D:void 0,className:"card group overflow-hidden p-0 transition-all hover:translate-y-[-4px]",role:"article","aria-labelledby":`product-title-${t.id}`,children:[e.jsxs(w,{to:`/product/${t.id}`,className:"block relative aspect-square w-full overflow-hidden bg-neutral-100 dark:bg-neutral-800 p-6",children:[e.jsx("img",{src:t.image,alt:t.title,className:"h-full w-full object-contain object-center transition-transform duration-300 group-hover:scale-105",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-0 opacity-0 transition-all group-hover:bg-opacity-10 group-hover:opacity-100",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),E(t)},className:"btn-primary transform scale-90 transition-transform group-hover:scale-100","aria-label":`Add ${t.title} to cart`,children:[e.jsx(I,{className:"mr-2 h-5 w-5","aria-hidden":"true"}),"Add to Cart"]}),e.jsx(w,{to:`/product/${t.id}`,className:"btn-secondary transform scale-90 transition-transform group-hover:scale-100","aria-label":`View details for ${t.title}`,children:e.jsx(V,{className:"h-5 w-5","aria-hidden":"true"})})]})})]}),e.jsxs("div",{className:"p-4 dark:text-white",children:[e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:"inline-block rounded-full bg-primary-100 dark:bg-primary-900 px-2.5 py-0.5 text-xs font-medium text-primary-800 dark:text-primary-300",children:t.category.charAt(0).toUpperCase()+t.category.slice(1)})}),e.jsx(w,{to:`/product/${t.id}`,children:e.jsx("h3",{id:`product-title-${t.id}`,className:"mb-1 font-medium text-neutral-900 dark:text-neutral-950 line-clamp-1 hover:text-primary-600 dark:hover:text-primary-400",title:t.title,children:t.title})}),e.jsx("p",{className:"mb-3 text-sm text-neutral-600 dark:text-neutral-400 line-clamp-2",title:t.description,children:t.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-lg font-semibold text-primary-700 dark:text-neutral-950",children:["$",t.price.toFixed(2)]}),e.jsx("button",{onClick:()=>E(t),className:"btn-outline py-1.5 px-3 text-sm md:hidden dark:border-neutral-600 dark:text-white dark:hover:bg-neutral-700","aria-label":`Add ${t.title} to cart`,children:"Add to Cart"})]})]})]},t.id))}),u&&e.jsx("div",{className:"flex justify-center mt-8 py-4","aria-live":"polite","aria-busy":"true",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 dark:border-primary-400",role:"status",children:e.jsx("span",{className:"sr-only",children:"Загрузка дополнительных товаров..."})})}),!b&&f.length>0&&e.jsx("div",{className:"text-center mt-8 py-4 text-neutral-600 dark:text-neutral-300",children:e.jsx("p",{children:"You've reached the end of the results"})})]})};export{Y as default};
